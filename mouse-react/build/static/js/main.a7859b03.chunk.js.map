{"version":3,"sources":["js/modules/Home.js","js/util/Rules.js","js/util/System.js","js/util/SocketUtil.js","js/util/GameUtil.js","js/modules/canvas/CanvasUtil.js","js/modules/ui/Instructions.js","js/modules/ui/Lobby.js","js/modules/canvas/Canvas.js","js/modules/ui/Controls.js","js/modules/ui/Clipboard.js","js/icons/clipboard.png","js/modules/Room.js","App.js","reportWebVitals.js","index.js"],"names":["INPUT_CSS","Home","name","setName","room","useParams","useState","navigate","setNavigate","code","setCode","useEffect","document","title","handleKeyPress","event","key","to","className","type","placeholder","onChange","target","value","onKeyPress","autoFocus","DEFAULTS","GRID","WIDTH","HEIGHT","STEP","Math","floor","console","warn","DEPLOYED","HOME_URL","SOCKET","replace","io","transports","canvasUtil","this","canvas","ctx","img","Image","update","colors","clear","rect","canvasRef","current","log","parent","parentElement","getContext","fillStyle","fillRect","w","h","toDataURL","data","onload","drawImage","width","height","src","requestAnimationFrame","render","x","y","color","translate","strokeStyle","lineWidth","strokeRect","setTransform","c","PLAYER","id","position","alive","PLAYERS","BLOCKS","PICKUPS","BOMB","LIMIT","PAUSED","isPlayerBlockColliding","block","playerX","playerY","BETWEEN_X","BETWEEN_Y","isTouching","item1","item2","SAME_SPOT","UP_SPOT","DOWN_SPOT","LEFT_SPOT","RIGHT_SPOT","setPlayer","player","setPlayerPositions","players","onDeath","handlePlayerDeath","setPause","bool","LAST","ELAPSED","animate","time","pickupKeys","Object","keys","i","length","p","handlePickups","outline","handlePlayers","drawPlayer","handleOutOfBounds","elapsed","velocity","age","handleBlocks","Instructions","visible","setVisible","onClick","Lobby","children","handleChange","map","isPlayer","style","selected","picker","nickname","Canvas","onMouseMove","onKey","zoomMultiplier","useRef","focus","init","setCanvas","transform","clientX","clientY","offsetTop","offsetLeft","onKeyDown","onContextMenu","preventDefault","tabIndex","ref","Controls","onPress","handleControls","onTouchStart","Clipboard","ClipButton","alt","URL","navigator","clipboard","writeText","Room","view","setView","host","setHost","setPlayers","setColor","bomb","setBomb","setZoomMultiplier","shake","setShake","endScreenMsg","setEndScreenMsg","endScreenVisible","setEndScreenVisible","emit","on","response","end","message","playersList","difficulty","game","blocks","pickups","limit","handleShake","handleStart","handleKey","setKeys","handleColorChange","setPlayerColor","setTimeout","handleEndScreen","classNames","timer","App","path","element","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a7859b03.chunk.js","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { Link, useParams, Navigate } from 'react-router-dom';\r\n\r\nconst INPUT_CSS = \"text-input large bold\";\r\n\r\n/*\r\n  Display home screen\r\n  - prompt user for display name\r\n  - prompt user for room code if prompted\r\n*/\r\nconst Home = ({ name, setName }) => {\r\n  const { room } = useParams();\r\n  const [navigate, setNavigate] = useState(null);\r\n  const [code, setCode] = useState(room);\r\n\r\n  useEffect(() => {\r\n    document.title = room || \"block\";\r\n  }, [room]);\r\n\r\n  const handleKeyPress = (event) => {\r\n    if((event.key === \"Enter\") && name && code) {\r\n      setNavigate(<Navigate to={`/${code}`}/>)\r\n    }\r\n  }\r\n\r\n  if(navigate) return navigate;\r\n  return (\r\n    <div className=\"home\">\r\n      <input \r\n        className={INPUT_CSS} \r\n        type=\"text\" \r\n        placeholder=\"name\"\r\n        onChange={(event) => { setName(event.target.value )}} \r\n        onKeyPress={room ? handleKeyPress : null}\r\n        autoFocus\r\n      />\r\n      { !room &&\r\n        <input \r\n          className={INPUT_CSS + (name || code ? \"\" : \" hide\")} \r\n          type=\"text\" \r\n          placeholder=\"room code\" \r\n          onChange={(event) => { setCode(event.target.value) }} \r\n          onKeyPress={room ? handleKeyPress : null}\r\n        />\r\n      }\r\n      <Link className={\"round-btn medium\" + (name && code ? \"\" : \" hide\")} to={`/${code}`}> join </Link> \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Home;","export const DEFAULTS = {\r\n  WIDTH               : 735,\r\n  HEIGHT              : 735,\r\n  STEP                : 15,\r\n  COLOR               : \"#03a9f4\",\r\n  MAX_AGE             : 500\r\n}\r\n\r\nexport const GRID = {\r\n  WIDTH   : DEFAULTS.WIDTH / DEFAULTS.STEP,\r\n  HEIGHT  : DEFAULTS.HEIGHT / DEFAULTS.STEP,\r\n  STEP    : DEFAULTS.STEP\r\n}\r\n\r\nexport const SPAWN = {\r\n  x : Math.floor(GRID.WIDTH / 2) * GRID.STEP,\r\n  y : Math.floor(GRID.HEIGHT / 2) * GRID.STEP\r\n}\r\n\r\nif(DEFAULTS.WIDTH % DEFAULTS.STEP || DEFAULTS.WIDTH % DEFAULTS.STEP) {\r\n  console.warn(\"Height or width must be divisible by step\");\r\n}","const DEV = false;\r\n\r\nconst LOCAL_CLIENT = \"http://localhost:3000\";\r\nconst LOCAL_SERVER = \"http://localhost:3300\";\r\n\r\nconst DEPLOYED = \"https://block10.herokuapp.com\";\r\n\r\nexport const HOME_URL = DEV ? LOCAL_CLIENT : DEPLOYED;\r\nexport const SERVER_URL = DEV ? LOCAL_SERVER : DEPLOYED;\r\n\r\nexport const STRIPPED_HOME_URL = HOME_URL?.replace(\"http://\",\"\").replace(\"https://\",\"\");","import io from 'socket.io-client';\r\nimport { SERVER_URL } from './System.js';\r\n\r\nconst DOMAIN = SERVER_URL;\r\n\r\nexport const SOCKET = io(DOMAIN, { transports: ['websocket']});","import { DEFAULTS, GRID } from './Rules.js';\r\nimport CanvasUtil from '../modules/canvas/CanvasUtil.js';\r\nconst canvasUtil = new CanvasUtil();\r\n\r\n\r\nlet PLAYER = { id: null, position: { x : null, y : null}, color: DEFAULTS.COLOR, alive: true }\r\nlet PLAYERS = {};\r\nlet BLOCKS = {};\r\nlet PICKUPS = {};\r\nlet BOMB = {};\r\nlet LIMIT = 0;\r\n\r\n\r\nlet PAUSED = false;\r\n\r\n\r\nexport const reset = () => {\r\n  PLAYER = { ...PLAYER, alive: true };\r\n  BLOCKS = {};\r\n  PICKUPS = {};\r\n  BOMB = {};\r\n  LIMIT = 0;\r\n}\r\n\r\n/*** CANVAS ***/\r\n\r\nexport const setCanvas = (canvasRef) => {\r\n  canvasUtil.init(canvasRef);\r\n  canvasUtil.clear();\r\n}\r\n\r\nexport const drawPlayer = () => {\r\n  if(!PLAYER.alive) return;\r\n\r\n  const { x, y } = PLAYER.position;\r\n  canvasUtil.rect(x, y, GRID.STEP, GRID.STEP, PLAYER.color);\r\n\r\n  if(BOMB?.id === PLAYER.id) canvasUtil.outline(x, y, GRID.STEP, GRID.STEP, \"RED\");\r\n}\r\n\r\nexport const drawBlock = (block) => {\r\n  canvasUtil.rect(block.x, block.y, block.width, block.height, block.color);\r\n}\r\n\r\n\r\n/*** HANDLERS ***/\r\n\r\n// moves blocks and checks if they're expired\r\nconst handleBlocks = (elapsed) => {\r\n  const keys = Object.keys(BLOCKS);\r\n  if(keys.length > 100) console.log(\"BLOCKS array is getting quite large! @ \", keys.length);\r\n  \r\n  for(var i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    BLOCKS[key].x += BLOCKS[key].velocity.x * elapsed;\r\n    BLOCKS[key].y += BLOCKS[key].velocity.y * elapsed;\r\n    BLOCKS[key].age += elapsed;\r\n    \r\n    drawBlock(BLOCKS[key]);\r\n    if(isPlayerBlockColliding(BLOCKS[key])) handlePlayerDeath();\r\n    if(BLOCKS[key].age > DEFAULTS.MAX_AGE) delete BLOCKS[key];\r\n  }\r\n}\r\n\r\nconst handlePlayers = () => {\r\n  for(const p in PLAYERS) {\r\n    const player = PLAYERS[p];\r\n    \r\n    if(PLAYER.id !== player.id && player.alive) {\r\n      if(isTouching(player.position, PLAYER)) console.log(\"TOUCHING PLAYERS\");\r\n      canvasUtil.rect(player.position.x, player.position.y, GRID.STEP, GRID.STEP, player.color);\r\n      if(BOMB?.id === player.id) canvasUtil.outline(player.position.x, player.position.y, GRID.STEP, GRID.STEP, \"RED\");\r\n    }\r\n  }\r\n}\r\n\r\n// check if a player activates a pickup\r\nconst handlePickups = () => {\r\n  const pickupKeys = Object.keys(PICKUPS);\r\n  for(var i = 0; i < pickupKeys.length; i++) {\r\n    const p = pickupKeys[i];\r\n    const { x, y, color } = PICKUPS[p];\r\n    canvasUtil.rect(x, y, GRID.STEP, GRID.STEP, color);\r\n  }\r\n}\r\n\r\n// check if player is out of bounds\r\nconst handleOutOfBounds = () => {\r\n  const playerX = PLAYER.position.x;\r\n  const playerY = PLAYER.position.y;\r\n  \r\n  const BELOW_X = playerX < (LIMIT * GRID.STEP);\r\n  const ABOVE_X = playerX >= DEFAULTS.WIDTH - (LIMIT * GRID.STEP);\r\n\r\n  const BELOW_Y = playerY < (LIMIT * GRID.STEP);\r\n  const ABOVE_Y = playerY >= DEFAULTS.HEIGHT - (LIMIT * GRID.STEP);\r\n  if(BELOW_X || ABOVE_X || BELOW_Y || ABOVE_Y) handlePlayerDeath();\r\n}\r\n\r\n\r\n// checks if a block is colliding with the player\r\nconst isPlayerBlockColliding = (block) => {\r\n  const playerX = PLAYER.position.x;\r\n  const playerY = PLAYER.position.y;\r\n\r\n  const BETWEEN_X = block.x <= playerX && playerX < block.x + block.width;\r\n  const BETWEEN_Y = block.y <= playerY && playerY < block.y + block.height;\r\n  return BETWEEN_X && BETWEEN_Y;\r\n}\r\n\r\n// checks if two items of the same size are touching (e.g pickups and players)\r\nconst isTouching = (item1, item2) => {\r\n  const SAME_SPOT = (item1.x === item2.x) && (item1.y === item2.y);\r\n  const UP_SPOT = (item1.x === item2.x) && (item1.y - GRID.STEP === item2.y);\r\n  const DOWN_SPOT = (item1.x === item2.x) && (item1.y + GRID.STEP === item2.y);\r\n  const LEFT_SPOT = (item1.x - GRID.STEP === item2.x) && (item1.y === item2.y);\r\n  const RIGHT_SPOT = (item1.x + GRID.STEP === item2.x) && (item1.y === item2.y);\r\n\r\n  return SAME_SPOT || UP_SPOT || DOWN_SPOT || LEFT_SPOT || RIGHT_SPOT;\r\n}\r\n\r\n\r\n/*** SETTERS ***/\r\n\r\n\r\nexport const setPlayer = (player) => {\r\n  PLAYER = { ...PLAYER, ...player};\r\n}\r\n\r\nexport const setPlayerColor = (color) => {\r\n  PLAYER.color = color;\r\n}\r\n\r\nexport const setPlayerSpawn = (position) => {\r\n  PLAYER.position = position;\r\n}\r\n\r\nexport const setKeys = (key) => {\r\n  if(!PLAYER.alive || PAUSED) return;\r\n  \r\n  if(key === \"w\" || key === \"ArrowUp\") PLAYER.position.y -= GRID.STEP;\r\n  if(key === \"s\" || key === \"ArrowDown\") PLAYER.position.y += GRID.STEP;\r\n  if(key === \"a\" || key === \"ArrowLeft\") PLAYER.position.x -= GRID.STEP;\r\n  if(key === \"d\" || key === \"ArrowRight\") PLAYER.position.x += GRID.STEP;\r\n  return PLAYER.position;\r\n}\r\n\r\nexport const setPlayerPositions = (players) => {\r\n  PLAYERS = players;\r\n}\r\n\r\nexport const setGame = (game) => {\r\n  BLOCKS = {...game?.blocks, ...BLOCKS};\r\n  PICKUPS = game?.pickups;\r\n  BOMB = game?.bomb;\r\n  LIMIT = game?.limit;\r\n}\r\n\r\n\r\n\r\n/*** DEATH ***/\r\n\r\nlet onDeath = null;\r\n\r\nexport const setOnDeath = (func) => {\r\n  onDeath = func;\r\n}\r\n\r\nconst handlePlayerDeath = () => {\r\n  if(!PLAYER.alive) return;\r\n\r\n  PLAYER.alive = false;\r\n  if(onDeath) onDeath();\r\n}\r\n\r\n\r\n\r\n/*** GAMELOOP ***/\r\n\r\n\r\nexport const setPause = (bool) => {\r\n  PAUSED = bool\r\n}\r\n\r\nlet LAST = 0, ELAPSED = 0;\r\nexport const animate = () => {\r\n  const render = (time) => {\r\n    ELAPSED = (time - LAST) / 16;\r\n    LAST = time;\r\n\r\n    if(!PAUSED)  {\r\n      canvasUtil.clear();\r\n      handlePickups();\r\n      handlePlayers();\r\n      drawPlayer();\r\n      handleOutOfBounds();\r\n      handleBlocks(ELAPSED);\r\n    }\r\n\r\n    // canvasUtil.rect(LIMIT * GRID.STEP, LIMIT * GRID.STEP, DEFAULTS.WIDTH - (LIMIT * GRID.STEP * 2), DEFAULTS.WIDTH - (LIMIT * GRID.STEP * 2), \"rgb(0,0,0,.3)\");\r\n\r\n    requestAnimationFrame(render);\r\n  }\r\n\r\n  requestAnimationFrame(render);\r\n}","class CanvasUtil {\r\n  constructor() {\r\n    this.canvas = null;\r\n    this.ctx = null;\r\n\r\n    this.img = new Image();\r\n    this.update = false;\r\n\r\n    this.colors = {\r\n      clear: \"WHITE\",\r\n      rect: \"BLACK\"\r\n    }\r\n  }\r\n\r\n  /*\r\n    canvasRef : react ref to canvas element\r\n  */\r\n  init(canvasRef) {\r\n    if(!canvasRef?.current) {\r\n      console.log(\"Could not initialize Canvas\");\r\n      return;\r\n    }\r\n    \r\n    console.log(\"Initializing Canvas\");\r\n    \r\n    this.canvas = canvasRef.current;\r\n    this.parent = canvasRef.current.parentElement;\r\n    this.ctx = this.canvas.getContext(\"2d\");\r\n\r\n    this.clear();\r\n  }\r\n\r\n  clear() {\r\n    if(!this.canvas) return;\r\n\r\n    this.ctx.fillStyle = this.colors.clear;\r\n    this.ctx.fillRect(0,0, this.w(), this.h())\r\n  }\r\n\r\n\r\n  getData() {\r\n    if(!this.canvas) return;\r\n    return this.canvas.toDataURL();\r\n  }\r\n\r\n  setData(data) {\r\n    if(!this.canvas) return;\r\n\r\n    var img = new Image();\r\n    img.onload = () => {\r\n      this.ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\r\n    }\r\n    this.img.src = data;\r\n\r\n    this.update = true;\r\n  }\r\n\r\n  draw() {\r\n    if(!this.canvas) return;\r\n\r\n    const render = () => {\r\n        if(this.update){  // only raw if needed\r\n          this.update = false;\r\n          this.ctx.drawImage(this.img, 0, 0, this.canvas.width, this.canvas.height);\r\n        }\r\n        requestAnimationFrame(render);\r\n    }\r\n    requestAnimationFrame(render);\r\n  }\r\n  \r\n  rect(x, y, width, height, color) {\r\n    this.ctx.fillStyle = color || this.colors.rect ;\r\n    this.ctx.fillRect(x, y, width, height);\r\n  }\r\n\r\n  outline(x, y, width, height, color ){\r\n    this.ctx.translate(.5,.5);\r\n    this.ctx.strokeStyle = color || this.colors.rect ;\r\n    this.ctx.lineWidth = 2;\r\n    this.ctx.strokeRect(x, y, width, height);\r\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n  }\r\n  \r\n  w() { return this.canvas.width; }\r\n  h() { return this.canvas.height }\r\n\r\n  setColors(c) {\r\n    this.colors = { ...this.colors, ...c};\r\n  }\r\n}\r\n\r\nexport default CanvasUtil;","import { useState } from 'react';\r\n\r\nconst Instructions = () => {\r\n  const [visible, setVisible] = useState(true);\r\n\r\n  if(!visible) return null;\r\n  return (\r\n    <div className=\"instructions flex-col\">\r\n      <label className=\"large bold\"> how to play </label>\r\n      <div className=\"flex-col\">\r\n        <p className=\"small bold\"> &bull; A random player starts off as the <span>bomb</span>. </p>\r\n        <p className=\"small bold\"> &bull; Touch a yellow square to transfer the bomb to someone else before the timer runs out. </p>\r\n        <p className=\"small bold\"> &bull; Anyone can steal yellow squares from the bomb. </p>\r\n        <p className=\"small bold\"> &bull; Careful &mdash; the board gets smaller over time and you can get crushed by moving blocks. </p>\r\n      </div>\r\n      <button className=\"round-btn large bold\" onClick={() => { setVisible(false )}}> ok </button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Instructions;","const Lobby = ({ id, players, children, color, onChange }) => {\r\n  const handleChange = (event) => {\r\n    if(onChange) onChange(event.target.value);\r\n  }\r\n\r\n  \r\n  return (\r\n    <div className=\"lobby flex-col flex-fill\">\r\n      <div className=\"player-list flex-col\"> \r\n        { players?.map((p) => {\r\n          const isPlayer = p.id === id;\r\n          const style = { color : p.color };\r\n          const selected = isPlayer ? \" bold\" : \"\";\r\n          const picker = isPlayer  ? (\r\n            <span> <input type=\"color\" value={color} onChange={handleChange}/> </span>\r\n          ) : null;\r\n            return <label className={\"flex medium\" + selected} key={p.id} style={style}> {p.nickname} {picker} </label> \r\n          }\r\n        )}\r\n      </div>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Lobby;","import { useEffect, useRef } from 'react';\r\n\r\nimport { animate, setCanvas } from '../../util/GameUtil.js';\r\nimport { DEFAULTS } from '../../util/Rules.js';\r\n\r\nconst Canvas = ({ width, height, onMouseMove, onKey, zoomMultiplier, className}) => {\r\n  const canvasRef = useRef(null);\r\n  const position = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if(!canvasRef.current) return;\r\n    \r\n    canvasRef.current.focus();\r\n    setCanvas(canvasRef);\r\n    animate();\r\n  }, [width, height])\r\n\r\n  const handleMouseMove = (event) => {\r\n    if(!onMouseMove) return;\r\n\r\n    const { clientX, clientY } = event;\r\n    const { offsetTop, offsetLeft } = event.target;\r\n\r\n    const x = clientX - offsetLeft\r\n    const y = clientY - offsetTop;\r\n\r\n    position.current = { x, y };\r\n    if(onMouseMove) onMouseMove(position.current);\r\n  }\r\n\r\n  const handleKeyDown = (event) => {\r\n    if(onKey) onKey(event.key);\r\n  }\r\n\r\n  const prevent = (event) => { event.preventDefault() }\r\n\r\n  const scale = DEFAULTS.WIDTH / (DEFAULTS.WIDTH - zoomMultiplier * DEFAULTS.STEP * 2);\r\n  const style = {\r\n   transform: `scale(${scale})`\r\n  }\r\n\r\n  return (\r\n    <div className=\"canvas-wrapper\">\r\n      <canvas \r\n        className={className || \"\"}\r\n        width={DEFAULTS.WIDTH} \r\n        height={DEFAULTS.HEIGHT} \r\n        onMouseMove={handleMouseMove}\r\n        onKeyDown={handleKeyDown}\r\n        onContextMenu={prevent}\r\n        tabIndex={1}\r\n        ref={canvasRef}\r\n        style={style}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Canvas;","/*\r\n  Mobile controls that makes use of onTouchStart to work around 300ms delay on safari IOS\r\n*/\r\n\r\nconst Controls = ({ onPress }) => {\r\n  const handleControls = (event) => {\r\n    const { id } = event.target;\r\n    if(onPress) onPress(id);\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex mobile controls\">\r\n      <button id=\"a\" onTouchStart={handleControls}></button>\r\n      <div className=\"flex-col\">\r\n        <button id=\"w\" onTouchStart={handleControls}></button>\r\n        <button id=\"s\" onTouchStart={handleControls}></button>\r\n      </div>\r\n      <button id=\"d\" onTouchStart={handleControls}></button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Controls;","import { HOME_URL } from '../../util/System';\r\nimport CLIPBOARD from '../../icons/clipboard.png';\r\n\r\nconst Clipboard = ({ room }) => {\r\n\r\n  const handleCopy = () => {\r\n    const URL = HOME_URL + \"/\" + room;\r\n   navigator.clipboard.writeText(URL);\r\n  }\r\n\r\n  const ClipButton = () => {\r\n    return <span className=\"flex\"> <img src={CLIPBOARD} alt=\"clipboard\"/> </span>\r\n  }\r\n\r\n  return (\r\n    <label className=\"clipboard flex large bold\" title=\"copy room to clipboard\" onClick={handleCopy}> {room} <ClipButton/> </label>\r\n  )\r\n}\r\n\r\nexport default Clipboard;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAABHElEQVRoge3YQQrCMBCF4b/iFSriRd16xiKKp9GVNLWt0sxLMsg8KK46k89MAy1o8xRdd+AoXtumqCDNMe9FKGo0xSghQ/LbG2tmL0JRo2fEVN8ZJQQaYs5oIdAQczHev7SrKWb1mVEdlzc0/9baeP7EKM/+B3AqBPnEzMZMffZbMb/Ws4pRQu5LDTJrfcvimCkhR+yYnJEe0hstSWscgCv5Y5b7fMohYMdk9S4BgXqY4hCog6kCgfKYahAoi6kKgXKYIpAt183Yc9K7Y0R0xmI5sfSc9N4LCsH2BVknYJadumCrBMRbAuItAfGWgHhLQLwlIN4SEG8JiLeo3hCtMb8xxo6IY/4I8Tc7EhBvCYi3pKeW/OtfzfzNjrwAb3YJtHLIRU8AAAAASUVORK5CYII=\"","import { useState, useEffect } from 'react';\r\nimport { useParams, Navigate } from 'react-router-dom';\r\n\r\nimport { DEFAULTS } from '../util/Rules.js';\r\n\r\nimport { SOCKET } from '../util/SocketUtil.js';\r\n\r\nimport { reset, setPlayer, setPlayerSpawn, setPlayerColor, setKeys, setPlayerPositions, setGame, setOnDeath, setPause } from '../util/GameUtil.js';\r\n\r\nimport Instructions from './ui/Instructions.js';\r\nimport Lobby from './ui/Lobby.js';\r\nimport Canvas from './canvas/Canvas.js';\r\nimport Controls from './ui/Controls.js';\r\nimport Clipboard from './ui/Clipboard.js';\r\n\r\n\r\nconst Room = ({ name }) => {\r\n  const { room } = useParams();\r\n  \r\n  const [view, setView] = useState(0);\r\n  const [host, setHost] = useState(null);\r\n  const [players, setPlayers] = useState(null);\r\n  const [color, setColor] = useState(DEFAULTS.COLOR);\r\n  \r\n  const [bomb, setBomb] = useState(null);\r\n  const [zoomMultiplier, setZoomMultiplier] = useState(0);\r\n  const [shake, setShake] = useState(null);\r\n\r\n  const [endScreenMsg, setEndScreenMsg] = useState(null);\r\n  const [endScreenVisible, setEndScreenVisible] = useState(false);\r\n  \r\n  useEffect(() => {\r\n    if(!name) return;\r\n\r\n    SOCKET.emit('SET_NICK', name);\r\n    SOCKET.emit('JOIN_ROOM', room);\r\n\r\n    SOCKET.on('START_GAME', () => {\r\n      setView(1);\r\n      setEndScreenVisible(false);\r\n      setPause(false);\r\n    });\r\n\r\n    SOCKET.on('ROOM_UPDATE', (response) => {\r\n      if(response.end) {\r\n        setEndScreenMsg(response.message)\r\n        setPause(true);\r\n        setEndScreenVisible(true);\r\n        reset();\r\n      }\r\n  \r\n      setHost(response?.host);\r\n      setPlayers(response?.playersList);\r\n  \r\n      setPlayerPositions(response?.players);\r\n      setPlayerSpawn(response?.players[SOCKET.id]?.position);\r\n      if(response?.difficulty > 0) setView(1);\r\n    });\r\n\r\n    SOCKET.on('GENERATION', (response) => {\r\n      setGame(response);\r\n      setZoomMultiplier(response?.limit);\r\n      setBomb(response.bomb);\r\n    });\r\n\r\n    SOCKET.on('POSITIONS', setPlayerPositions);\r\n\r\n    SOCKET.on('PLAYER_COLORS', (response) => {\r\n      setPlayers(response.playersList)\r\n      setPlayerPositions(response.players);\r\n    });\r\n\r\n    SOCKET.on('EXPLODE', () => {\r\n      setPlayer({ alive: false });\r\n      handleShake();\r\n    });\r\n    \r\n  }, [room, name]);\r\n\r\n  useEffect(() => {\r\n    setPlayer({ id: SOCKET.id });\r\n    setOnDeath(() => {\r\n      SOCKET.emit(\"PLAYER_DEATH\");\r\n      handleShake();\r\n    });\r\n  }, []);\r\n\r\n  const handleStart = () => {\r\n    SOCKET.emit('START_GAME');\r\n  }\r\n\r\n  /*\r\n  const handleMouseMove = (position) => {\r\n    setPlayerPosition(position.x, position.y)\r\n    SOCKET.emit('PLAYER_POSITION', position);\r\n  }\r\n  */\r\n\r\n  const handleKey = (key) => {\r\n    const position = setKeys(key);\r\n    if(position) SOCKET.emit('PLAYER_POSITION', position);\r\n  }\r\n\r\n  const handleColorChange = (color) => {\r\n    setColor(color);\r\n    setPlayerColor(color);\r\n    SOCKET.emit(\"PLAYER_COLOR\", color);\r\n  }\r\n\r\n  const handleShake = () => {\r\n    setShake(\"animate-shake\");\r\n    setTimeout(() => { setShake(null) }, 500);\r\n  }\r\n\r\n  const handleEndScreen = () => {\r\n    setEndScreenVisible(false);\r\n    setBomb(0);\r\n    setView(0);\r\n    setZoomMultiplier(0);\r\n    setPause(false);\r\n  }\r\n\r\n  const getView = () => {\r\n    if(view === 1) {\r\n      return (\r\n        <div className=\"game flex-col flex-fill\">\r\n          { endScreenVisible &&\r\n            <div className=\"end-screen flex-col\">\r\n              <label className=\"huge bold\"> {endScreenMsg} </label>\r\n              <button className=\"round-btn large bold\" onClick={handleEndScreen}> back to lobby </button>\r\n            </div>\r\n          }\r\n          <label className=\"large bold center-text\"> {bomb?.timer} <> &mdash; </> {bomb?.nickname} </label>\r\n          <Canvas className={shake} onKey={handleKey} zoomMultiplier={zoomMultiplier}/>\r\n          <Controls onPress={handleKey}/>\r\n        </div>\r\n      )\r\n    } else {\r\n      return (\r\n        <div className=\"flex-col flex-fill\">\r\n          <Clipboard room={room}/>\r\n          <Lobby id={SOCKET.id} players={players} color={color} onChange={handleColorChange}>\r\n            { (host?.id === SOCKET.id) &&\r\n              <button className=\"round-btn large bold\" onClick={handleStart}> start </button>\r\n            }\r\n          </Lobby>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n  \r\n  if(!name) return <Navigate to={`/${room}/@`}/>\r\n\r\n  let classNames = \"room flex-col flex-fill\" + (view === 1 ? \" dark\" : \"\");\r\n  return (\r\n    <div className={classNames}>\r\n      <Instructions/>\r\n      {getView()}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Room;","import './css/main.css';\r\n\r\nimport { useState } from 'react';\r\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\r\n\r\nimport Home from './js/modules/Home.js';\r\nimport Room from './js/modules/Room.js';\r\n\r\nconst App = () => {\r\n  const [name, setName] = useState(null); // user's display name\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <BrowserRouter>\r\n        <Routes>\r\n          <Route path=\"/\" element={<Home name={name} setName={setName}/>}/>\r\n          <Route path=\"/:room/@\" element={<Home name={name} setName={setName}/>}/>\r\n          <Route path=\"/:room\" element={<Room name={name}/>}/>\r\n        </Routes>\r\n      </BrowserRouter>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}